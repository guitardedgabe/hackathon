<html>
<head>
	<title>Bucket List Uploader</title>
	<link href='http://fonts.googleapis.com/css?family=Muli|Amaranth' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="stylesheets/style.css"/>
	<script src="lib/jquery.js"></script>
	<script src="lib/underscore.js"></script>
	<script src="lib/backbone.js"></script>
	<script src="lib/jquery.form.js"></script>
</head>
<body>
<form id="uploadForm" enctype="multipart/form-data" action="/api/photos" method="post"> 
	<input type="file" id="userPhotoInput" name="userPhoto" />
 </form>

<span id="status" />
<img id="uploadedImage" />

</body>
<script>
$(document).ready(function() {

    status('Choose a file :)');

    // Check to see when a user has selected a file                                                                                                                
    var timerId;
    timerId = setInterval(function() {
	if($('#userPhotoInput').val() !== '') {
            clearInterval(timerId);

            $('#uploadForm').submit();
        }
    }, 500);

    $('#uploadForm').submit(function() {
        status('uploading the file ...');

        $(this).ajaxSubmit({                                                                                                                 

            error: function(xhr) {
		status('Error: ' + xhr.status);
            },

            success: function(response) {
		//TODO: We will fill this in later
            }
	});

	// Have to stop the form from submitting and causing                                                                                                       
	// a page refresh - don't forget this                                                                                                                      
	return false;
    });

    function status(message) {
	$('#status').text(message);
    }
});
</script>
</html>